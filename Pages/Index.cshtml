@page
@model IndexModel
@{
    ViewData["Title"] = "Ana Sayfa";
}

<section class="hero-section d-flex align-items-center justify-content-center py-5 mt-5">
    <div class="container text-center">
        <div class="hero-card p-4 p-md-5 rounded-4 shadow-lg mt-5">
            <div class="badge bg-primary bg-opacity-10 text-primary border border-primary mb-3">
                <span class="material-symbols-outlined fs-6 align-middle">auto_awesome</span> AI Destekli Analiz
            </div>
            <h1 class="display-4 fw-bold text-white mb-3">Gelecekteki Seni <span class="text-gradient">Tasarla</span></h1>
            <p class="text-secondary mb-5">Vücut ölçülerinizi girin, yapay zeka size en uygun planı çıkarsın.</p>

            <div class="card bg-dark border-secondary text-start p-4">
                <ul class="nav nav-tabs border-bottom-0 mb-4" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active text-primary fw-bold" id="manual-tab" data-bs-toggle="tab" data-bs-target="#manual" type="button">Vücut Bilgileri</button>
                    </li>
                </ul>

                <form id="fitForm">
                    <div class="row g-3 mb-3">
                        <div class="col-md-4">
                            <label class="form-label text-uppercase text-muted fs-7">Cinsiyet</label>
                            <select class="form-select bg-dark text-light border-secondary" id="gender">
                                <option value="male">Erkek</option>
                                <option value="female">Kadın</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label text-uppercase text-muted fs-7">Yaş</label>
                            <input type="number" class="form-control bg-dark text-light border-secondary" id="age" placeholder="Örn: 25" min="10" max="90">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label text-uppercase text-muted fs-7">Hedef</label>
                            <select class="form-select bg-dark text-light border-secondary" id="goal">
                                <option value="fatloss">Yağ Yakımı</option>
                                <option value="muscle">Kas Kazanımı</option>
                                <option value="endurance">Dayanıklılık</option>
                            </select>
                        </div>
                    </div>

                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label text-uppercase text-muted fs-7">Boy (cm)</label>
                            <div class="input-group">
                                <span class="input-group-text bg-dark border-secondary text-muted material-symbols-outlined">height</span>
                                <input type="number" class="form-control bg-dark text-light border-secondary" id="height" placeholder="Örn: 175" min="100" max="250">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label text-uppercase text-muted fs-7">Kilo (kg)</label>
                            <div class="input-group">
                                <span class="input-group-text bg-dark border-secondary text-muted material-symbols-outlined">monitor_weight</span>
                                <input type="number" class="form-control bg-dark text-light border-secondary" id="weight" placeholder="Örn: 70" min="30" max="300">
                            </div>
                        </div>
                    </div>

                    <div class="mt-4 pt-3 border-top border-secondary d-flex justify-content-between align-items-center">
                        <small class="text-danger d-none" id="errorMsg"><i class="bi bi-exclamation-circle"></i> Lütfen tüm alanları geçerli değerlerle doldurun!</small>

                        <button type="submit" class="btn btn-primary btn-lg px-5 d-flex align-items-center gap-2 ms-auto">
                            <span class="material-symbols-outlined">auto_awesome</span> Planı Oluştur
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<section class="py-5">
    <div class="container">
        <div class="row g-4">
            <div class="col-md-4">
                <div class="feature-card p-4 rounded-3 border border-secondary h-100">
                    <div class="icon-box bg-primary bg-opacity-10 text-primary rounded mb-3 p-3" style="width:fit-content">
                        <span class="material-symbols-outlined">person_check</span>
                    </div>
                    <h5>1. Profil Analizi</h5>
                    <p class="text-muted small">Yapay zeka vücut kompozisyonunuzu analiz eder.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card p-4 rounded-3 border border-secondary h-100">
                    <div class="icon-box bg-info bg-opacity-10 text-info rounded mb-3 p-3" style="width:fit-content">
                        <span class="material-symbols-outlined">visibility</span>
                    </div>
                    <h5>2. Görsel Dönüşüm</h5>
                    <p class="text-muted small">12 haftalık program sonrası sonucu simüle edin.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card p-4 rounded-3 border border-secondary h-100">
                    <div class="icon-box bg-success bg-opacity-10 text-success rounded mb-3 p-3" style="width:fit-content">
                        <span class="material-symbols-outlined">restaurant_menu</span>
                    </div>
                    <h5>3. Yol Haritası</h5>
                    <p class="text-muted small">Size özel günlük antrenman ve beslenme planı.</p>
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        document.getElementById('fitForm').addEventListener('submit', function(e) {
            e.preventDefault(); // Sayfanın yenilenmesini durdur

            // 1. Değerleri Al
            var age = document.getElementById('age').value;
            var height = document.getElementById('height').value;
            var weight = document.getElementById('weight').value;
            var errorMsg = document.getElementById('errorMsg');
            var btn = this.querySelector('button[type="submit"]');

            // 2. Doğrulama (Validation)
            var isValid = true;

            // Boş kontrolü veya mantıksız değer kontrolü
            if (!age || age < 10 || age > 90) isValid = false;
            if (!height || height < 100 || height > 250) isValid = false;
            if (!weight || weight < 30 || weight > 300) isValid = false;

            if (!isValid) {
                // Hata varsa mesajı göster
                errorMsg.classList.remove('d-none');
                // Titreme efekti (opsiyonel basit animasyon)
                btn.classList.add('btn-danger');
                setTimeout(() => btn.classList.remove('btn-danger'), 500);
                return;
            }

            // 3. Her şey düzgünse
            errorMsg.classList.add('d-none');

            // Butonu yükleniyor moduna al
            var originalText = btn.innerHTML;
            btn.innerHTML = '<span class="spinner-border spinner-border-sm"></span> Hesaplanıyor...';
            btn.disabled = true;

            // Yapay zeka simülasyonu (2 saniye bekle)
            setTimeout(function() {
                alert("Tebrikler! Boy: " + height + "cm, Kilo: " + weight + "kg için AI planınız oluşturuldu.");
                btn.innerHTML = originalText;
                btn.disabled = false;

                // Formu temizle
                document.getElementById('fitForm').reset();
            }, 2000);
        });
    </script>
}